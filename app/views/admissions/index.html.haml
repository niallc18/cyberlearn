// %h1 Current Admissions

// %table.table.table-bordered
//   %thead
//     %tr
//       %th Course
//       %th User
//       %th Rating
//       %th Review
//       %th Course Fee
//       %th
//       %th
//       %th

//   %tbody
//     - @admissions.each do |admission|
//       %tr
//         %td= admission.course.title
//         %td= admission.user
//         %td= admission.rating
//         %td= admission.review
//         %td= admission.course.details
//         %td= link_to 'Show Review', admission
//         %td= link_to 'Add Review', edit_admission_path(admission)
//         %td= link_to 'Destroy Admission', admission, method: :delete, data: { confirm: 'Are you sure?' }

// %br

// = link_to 'New Admission', new_admission_path

%h3
  .text-center
    Admissions
    .badge.badge-info
      = @admissions.count
%p

= search_form_for @q, url: @ransack_path do |f|
  = f.search_field :user_email_cont, placeholder: 'user email'
  = f.search_field :course_title_cont, placeholder: 'course title'
  = f.search_field :price_eq, placeholder: 'cost'
  = f.search_field :rating_eq, placeholder: 'rating'
  = f.search_field :review_cont, placeholder: 'review'
  = f.submit
= link_to 'refresh', @ransack_path

.table-responsive
  %table.table.table-bordered.table-striped.table-sm
    %thead
      %tr
        %th ID
        %th
          = sort_link(@q, :user_email)
          /.fa.fa-user
          /User
        %th
          = sort_link(@q, :created_at)
          /.fa.fa-clock
          /.fa.fa-lock-open
          /date 
        %th
          = sort_link(@q, :course_title)
          /.fa.fa-graduation-cap
          /Course name
        %th 
          = sort_link(@q, :cost)
          /.fa.fa-dollar-sign
          /Cost
        %th 
          = sort_link(@q, :updated_at)
          /.row
          /.text-warning.fa.fa-clock
          /Updated
        %th 
          = sort_link(@q, :rating)
          /.text-warning.fa.fa-star
          /Rating
        %th 
          .text-warning.fa.fa-comment
          Review
        %th
        %th
        %th
  
    %tbody
      - @admissions.each do |admission|
        %tr
          %td= admission.id
          %td= link_to admission.user, user_path(admission.user)
          %td= admission.created_at.strftime("%d/%b/%Y, %H:%M")
          %td= link_to admission.course, course_path(admission.course)
          %td= admission.course.details
          %td
            - if admission.rating.present?
              = admission.updated_at.strftime("%d/%b/%Y, %H:%M")
          %td= admission.rating
          %td= admission.review
          %td= link_to 'See Review', admission
          %td= link_to 'Add Review', edit_admission_path(admission)
          %td= link_to 'Delete admission', admission, method: :delete, data: { confirm: 'Are you sure?' }
!= pagy_bootstrap_nav(@pagy)
%br
